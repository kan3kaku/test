<!doctype html>
<html>
<head prefix="og:http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<meta charset="utf-8">
<title>index</title>
<link href="css/animation.css" rel="stylesheet" type="text/css">
<link href="css/styles.css" rel="stylesheet" type="text/css">
<meta name="description" content="">
<meta name="keywords" content="">
<meta property="og:title" content="" />
<meta property="og:type" content="web" />
<meta property="og:description" content=""/>
<meta property="og:url" content="" />
<meta property="og:image" content="" />
<meta property="og:site_name" content="">
<meta property="fb:app_id" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="js/jquery-1.11.3.min.js"></script>
<script>
$(function(){

    //li末尾要素のクローンを作成
    var clone =$(".slide-area .sl li:last").clone(true);

    //クローンをliの先頭に追加
    clone.insertBefore($(".slide-area .sl li:first"));
    $(".slide-area .sl li:last").remove();

    var loop;
    //スライドのイメージの数を取得
    var imgnum =$(".slide-area li").length;
    //イメージの数分の●を作成
    for(var i=0;i<imgnum;i++){
        $(".dot").append("<li>●</li>");
    };



    $(".dot li:first").addClass("select");

    $(document).ready(run);

    //スライドのliにIDの連番を振る
    $('.sl li').each(function(i){
    $(this).attr('id',i+1);
    });


    function run(){
        loop = setInterval(function(){
            //li先頭要素のクローンを作成
            var clone =$(".slide-area .sl li:first").clone(true);
            //li先頭要素のマージンレフトにマイナス要素を指定しアニメーションさせる
            $(".slide-contena ul").animate({
                marginLeft:"-480px"
            },{
            duration:600,
            complete:function(){
                //処理完了時に先頭要素を削除
                $(".slide-area .sl li:first").remove();
                //クローンをliの最後に追加
                clone.insertAfter($(".slide-area .sl li:last"));
                $(".slide-contena ul").css("margin-left","-160px");
            }
            });
            var setid =$(".sl li:nth-child(2)").attr("id");
            var outid =setid*1-1;
            $(".dot li").removeClass("select");
            $(".dot li").eq(outid).addClass("select");
            console.log(outid);
        },4000);
    };

    //左のスクロールボタン
    function leftscloll(){
        if($("body").attr("class")!="ready"){
            $("body").addClass("ready");
            //li末尾要素のクローンを作成
            var clone =$(".slide-area .sl li:last").clone(true);
            //クローンをliの先頭に追加
            clone.insertBefore($(".slide-area .sl li:first"));
            $(".slide-contena ul").css("margin-left","-480px");
            //li先頭要素のマージンレフトにマイナス要素を指定しアニメーションさせる
            $(".slide-contena ul").animate({
                marginLeft:"-160px"
            },{
            duration:600,
            complete:function(){
                //処理完了時に末尾要素を削除
                $(".slide-area .sl li:last").remove();
                $("body").removeClass("ready");
            }
            });
            var imgnumm =imgnum+1;
            var setid =$(".sl li:nth-child("+imgnumm+")").attr("id");
            var outid =setid*1-1;

            $(".dot li").removeClass("select");
            $(".dot li").eq(outid).addClass("select");
        }
    };
    $(document).on("click",".leftBtn",leftscloll);

    //右のスクロールボタン
    function rightscloll(){
        if($("body").attr("class")!="ready"){
            $("body").addClass("ready");

            //li先頭要素のクローンを作成
            var clone =$(".slide-area .sl li:first").clone(true);
            //li先頭要素のマージンレフトにマイナス要素を指定しアニメーションさせる
            $(".slide-contena ul").animate({
                marginLeft:"-480px"
            },{
            duration:600,
            complete:function(){
                //処理完了時に先頭要素を削除
                $(".slide-area .sl li:first").remove();
                //クローンをliの最後に追加
                clone.insertAfter($(".slide-area .sl li:last"));
                $(".slide-contena ul").css("margin-left","-160px").addClass("floating");
                $("body").removeClass("ready");
            }
            });
            var setid =$(".sl li:nth-child(2)").attr("id");
            var outid =setid*1-1;
            $(".dot li").removeClass("select");
            $(".dot li").eq(outid).addClass("select");
        }
    };
    $(document).on("click",".rightBtn",rightscloll);

    function stop_run(){
        clearInterval(loop);
    };

    var contbtn = '<div class="contBtn"><div class="leftBtn" id=""></div><div class="rightBtn"></div></div>';
    function btnin(){
        /*$(".slide-area").append($(contbtn));*/
        $(contbtn).appendTo($(".slide-area .sl")).hide().fadeIn();
    }
    function btnout(){
        /*$(".contBtn").remove(".contBtn");*/
        $(".contBtn").fadeOut("fast").queue(function(){
            this.remove();
        });
    };
    //スライドにマウスオーバーでコントロールボタンを作成
    $(".slide-area .sl").hover((btnin),(btnout));
    //スライドにマウスオーバーで動きを止める
    $(".slide-area .sl").hover((stop_run),(run));
});
</script>
</head>
<body>
<div class="slide-area">
    <div class="slide-contena">
testfffff
        <ul class="cf sl" id="sl">
            <li><img src="http://placehold.jp/000000/ffffff/320x320.png?text=1"></li>
            <li><img src="http://placehold.jp/808080/ffffff/320x320.png?text=2"></li>
            <li><img src="http://placehold.jp/0000FF/ffffff/320x320.png?text=3"></li>
            <li><img src="http://placehold.jp/00FF00/ffffff/320x320.png?text=4"></li>
            <li><img src="http://placehold.jp/00FFFF/ffffff/320x320.png?text=5"></li>
            <li><img src="http://placehold.jp/FFFF00/ffffff/320x320.png?text=6"></li>
            <li><img src="http://placehold.jp/FF0000/ffffff/320x320.png?text=7"></li>
            <li><img src="http://placehold.jp/800080/ffffff/320x320.png?text=8"></li>
        </ul>
    </div>
    <div class="dots">
        <ul class="dot cf"></ul>
    </div>
</div>
<div class="anime bigEntrance">
    <img src="http://placehold.jp/800080/ffffff/200x100.png?text=アニメ">
</div>
</body>
</html>
